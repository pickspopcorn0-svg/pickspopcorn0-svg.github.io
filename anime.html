<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Anime — Popcorn Picks</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
  background:#0b0b0c;
  color:#fff;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;
}
a{text-decoration:none;color:inherit}

/* TOP BAR */
.top{
  position:sticky;top:0;z-index:50;
  display:flex;justify-content:space-between;align-items:center;
  padding:16px 20px;
  background:rgba(10,10,10,.90);
  backdrop-filter:blur(10px);
  border-bottom:1px solid #222;
}
.top b{font-size:16px}

/* SEARCH */
.wrap{padding:16px 18px 6px}
.searchRow{display:flex;gap:10px;flex-wrap:wrap}
.searchRow input{
  flex:1;min-width:240px;
  padding:12px 14px;border-radius:12px;
  border:1px solid #222;background:#111;color:#fff;outline:none;
}
.btn{
  padding:12px 14px;border-radius:12px;
  border:1px solid #222;background:#141414;color:#fff;cursor:pointer;
}
.btn:active{transform:translateY(1px)}
.small{color:#aaa;font-size:12px;padding:10px 2px 0;line-height:1.4}

/* GRID */
.grid{
  padding:16px 18px 26px;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(230px,1fr));
  gap:18px;
}

/* CARD */
.card{
  border-radius:18px;border:1px solid #181818;overflow:hidden;
  position:relative;background:#111;min-height:320px;
}
.poster{
  height:320px;
  background:#111;
  background-size:cover;
  background-position:center;
}
.info{
  position:absolute;bottom:0;left:0;right:0;
  padding:14px;
  background:linear-gradient(to top,rgba(0,0,0,.92),transparent);
}
.title{font-size:18px;font-weight:650;line-height:1.2}
.meta{font-size:12px;color:#aaa;margin-top:4px}
.tagline{
  font-size:12px;color:#cfcfcf;margin-top:8px;opacity:.9;
  display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;
}

.empty{padding:22px 18px 30px;color:#aaa;display:none}

/* MODAL (CENTERED) */
.modal{
  position:fixed;inset:0;z-index:200;
  background:rgba(0,0,0,.72);
  display:none;
  align-items:center;          /* <-- CENTER (not bottom) */
  justify-content:center;      /* <-- CENTER */
  padding:18px;
}
.sheet{
  width:min(760px, 100%);
  max-height:88vh;
  overflow:auto;
  background:#0f0f10;
  border:1px solid #222;
  border-radius:18px;
  box-shadow:0 30px 120px rgba(0,0,0,.65);
}
.sheetInner{padding:16px 18px 22px}

.detailTop{
  display:flex;justify-content:space-between;align-items:center;
  gap:12px;padding:6px 0 14px;
}
.closeX{
  border:1px solid #222;background:#141414;color:#fff;
  border-radius:12px;padding:10px 12px;cursor:pointer;
}

.hero{
  display:grid;
  grid-template-columns:140px 1fr;
  gap:14px;
  align-items:start;
}
.heroPoster{
  width:140px;height:200px;
  border-radius:14px;border:1px solid #222;
  background:#111;background-size:cover;background-position:center;
}
.h1{font-size:20px;font-weight:800;line-height:1.2}
.h2{margin-top:6px;color:#aaa;font-size:12px;line-height:1.4}
.badges{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
.badge{
  font-size:12px;border:1px solid #222;background:#111;color:#ddd;
  padding:8px 10px;border-radius:999px;
}
.synopsis{margin-top:14px;color:#e7e7e7;font-size:14px;line-height:1.65}

@media(max-width:520px){
  .hero{grid-template-columns:1fr}
  .heroPoster{width:100%;height:220px}
}
</style>
</head>

<body>

<div class="top">
  <a href="index.html">← Home</a>
  <b>Anime</b>
  <span></span>
</div>

<div class="wrap">
  <div class="searchRow">
    <input id="q" type="text" placeholder="Search title, year, genre…" autocomplete="off">
    <button class="btn" id="clearBtn" type="button">Clear</button>
  </div>
  <div class="small" id="count">Loading…</div>
</div>

<div class="grid" id="grid"></div>
<div class="empty" id="empty">No matches.</div>

<!-- DETAIL MODAL -->
<div class="modal" id="modal">
  <div class="sheet" role="dialog" aria-modal="true">
    <div class="sheetInner">
      <div class="detailTop">
        <b>Details</b>
        <button class="closeX" id="closeBtn" type="button">Close</button>
      </div>

      <div class="hero">
        <div class="heroPoster" id="dPoster"></div>
        <div>
          <div class="h1" id="dTitle"></div>
          <div class="h2" id="dMeta"></div>
          <div class="badges" id="dBadges"></div>
        </div>
      </div>

      <div class="synopsis" id="dSynopsis"></div>
    </div>
  </div>
</div>

<script>
/*
POSTERS:
You said you already uploaded and don't want to rename.
So we use these exact names.
Make sure these files exist exactly:
assets/posters/slime.jpg.JPG
assets/posters/bluelock.jpg.JPG
assets/posters/classroomelite.jpg.JPG
assets/posters/attackontitan.jpg.JPG
assets/posters/noblesse.jpg.WEBP
assets/posters/sololeveling.jpg.JPG
assets/posters/haikyuu.jpg.JPG
*/

const ANIME = [
  {
    id:"slime",
    title:"That Time I Got Reincarnated as a Slime",
    year:"2018",
    meta:"Isekai • Fantasy • Adventure",
    poster: "assets/posters/anime/slime.jpg.JPG"
    synopsis:"A regular guy dies and wakes up in a fantasy world as the weakest thing imaginable — a slime. The twist: he’s got broken abilities, a calm brain, and a talent for turning enemies into allies. What starts as survival becomes kingdom-building, politics, and big power clashes — but with a surprisingly warm heart."
  },
  {
    id:"bluelock",
    title:"Blue Lock",
    year:"2022",
    meta:"Sports • Psychological • Competition",
    poster:"assets/posters/bluelock.jpg.JPG",
    synopsis:"Japan locks hundreds of strikers inside a brutal training program designed to create one selfish, unstoppable goal machine. Friendships don’t help you here — ego does. Every match is pressure, mind games, and ruthless selection. If you like intensity and momentum, it hits hard."
  },
  {
    id:"classroomoftheelite",
    title:"Classroom of the Elite",
    year:"2017",
    meta:"Psychological • School • Strategy",
    poster:"assets/posters/classroomelite.jpg.JPG",
    synopsis:"A prestigious school ranks students like an economy: points, privileges, and public wins. In the quiet corner sits Ayanokoji — unreadable, sharp, and hiding what he can really do. It’s less “school life” and more social chess, where manipulation is the real sport."
  },
  {
    id:"attackontitan",
    title:"Attack on Titan",
    year:"2013",
    meta:"Dark Fantasy • Action • Mystery",
    poster:"assets/posters/attackontitan.jpg.JPG",
    synopsis:"Humanity lives behind walls, terrified of giants that eat people for no reason. When the walls fall, the story explodes into war, secrets, betrayals, and questions that flip everything you believed. It starts as survival horror and grows into one of the most intense long-form mysteries in anime."
  },
  {
    id:"noblesse",
    title:"Noblesse",
    year:"2020",
    meta:"Supernatural • Action • Academy",
    poster:"assets/posters/noblesse.jpg.WEBP",
    synopsis:"An ancient noble wakes up after centuries and tries to live quietly in modern times — until secret organizations, experiments, and superhuman battles find him. It mixes stylish fights with loyalty-and-family vibes, and it’s best when it leans into that “old power in a new world” feeling."
  },
  {
    id:"sololeveling",
    title:"Solo Leveling",
    year:"2024",
    meta:"Action Fantasy • Power Growth • Dungeon",
    poster:"assets/posters/sololeveling.jpg.JPG",
    synopsis:"Hunters risk their lives in dungeon raids — and Sung Jinwoo is the weakest of them all… until a near-death mission gives him a system that lets him level up like a game. From there it’s pure rise-to-power satisfaction: upgrades, boss fights, and that cold moment when the underdog becomes the threat."
  },
  {
    id:"haikyuu",
    title:"Haikyuu!!",
    year:"2014",
    meta:"Sports • Feel-good • Team",
    poster:"assets/posters/haikyuu.jpg.JPG",
    synopsis:"A short kid with ridiculous energy decides he’ll become a volleyball monster anyway. What makes it addictive isn’t just matches — it’s the teamwork, rivalries, training arcs, and how every character gets their moment. Hype, heart, and momentum done right."
  }
];

const $ = (id)=>document.getElementById(id);
const grid = $("grid");
const qEl = $("q");
const emptyEl = $("empty");
const countEl = $("count");

const modal = $("modal");
const closeBtn = $("closeBtn");
const dPoster = $("dPoster");
const dTitle = $("dTitle");
const dMeta = $("dMeta");
const dBadges = $("dBadges");
const dSynopsis = $("dSynopsis");

function normalize(s){ return String(s||"").toLowerCase().trim(); }

function safeBgUrl(url){
  // helps with weird characters/spaces
  return encodeURI(String(url||""));
}

function openDetail(item){
  dPoster.style.backgroundImage = `url('${safeBgUrl(item.poster)}')`;
  dTitle.textContent = item.title || "";
  dMeta.textContent = `${item.year || ""}${item.meta ? " • " + item.meta : ""}`;

  dBadges.innerHTML = "";
  String(item.meta||"").split("•").map(x=>x.trim()).filter(Boolean).forEach(t=>{
    const b = document.createElement("div");
    b.className = "badge";
    b.textContent = t;
    dBadges.appendChild(b);
  });

  dSynopsis.textContent = item.synopsis || "";
  modal.style.display = "flex";
  location.hash = item.id;
}

function closeDetail(){
  modal.style.display = "none";
  if(location.hash) history.replaceState(null, "", location.pathname);
}

closeBtn.onclick = closeDetail;
modal.addEventListener("click", (e)=>{ if(e.target === modal) closeDetail(); });
window.addEventListener("keydown", (e)=>{ if(e.key === "Escape") closeDetail(); });

function card(item){
  const a = document.createElement("a");
  a.className = "card";
  a.href = "#"+encodeURIComponent(item.id);

  a.innerHTML = `
    <div class="poster" style="background-image:url('${safeBgUrl(item.poster)}');"></div>
    <div class="info">
      <div class="title">${item.title}</div>
      <div class="meta">${item.year}${item.meta ? " • " + item.meta : ""}</div>
      <div class="tagline">${item.synopsis}</div>
    </div>
  `;

  a.onclick = (ev)=>{ ev.preventDefault(); openDetail(item); };
  return a;
}

function render(){
  const q = normalize(qEl.value);

  const filtered = ANIME
    .filter(x=>{
      const hay = [x.title,x.year,x.meta,x.synopsis].join(" ");
      return normalize(hay).includes(q);
    })
    .sort((a,b)=>String(a.title).localeCompare(String(b.title)));

  grid.innerHTML = "";
  filtered.forEach(x=>grid.appendChild(card(x)));

  countEl.textContent = `${filtered.length} title${filtered.length===1?"":"s"} found`;
  emptyEl.style.display = filtered.length ? "none" : "block";
}

$("clearBtn").onclick = ()=>{ qEl.value=""; render(); };
qEl.addEventListener("input", render);

function tryOpenFromHash(){
  const id = decodeURIComponent((location.hash || "").replace("#",""));
  if(!id) return;
  const item = ANIME.find(x=>x.id === id);
  if(item) openDetail(item);
}

render();
tryOpenFromHash();
window.addEventListener("hashchange", tryOpenFromHash);
</script>

</body>
</html>
