<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>K-Drama — Popcorn Picks</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
  background:#0b0b0c;
  color:#fff;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial;
}
a{text-decoration:none;color:inherit}
.top{
  position:sticky;top:0;
  display:flex;justify-content:space-between;align-items:center;
  padding:16px 20px;
  background:rgba(10,10,10,.88);
  backdrop-filter:blur(10px);
  border-bottom:1px solid #222;
  z-index:20;
}
.grid{
  padding:24px;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(230px,1fr));
  gap:22px;
}
.card{
  border-radius:18px;
  border:1px solid #181818;
  overflow:hidden;
  position:relative;
  background:#111;
  min-height:320px;
}
.poster{
  height:320px;
  background:#111;
  background-size:cover;
  background-position:center;
}
.info{
  position:absolute;
  bottom:0;left:0;right:0;
  padding:14px;
  background:linear-gradient(to top,rgba(0,0,0,.92),transparent);
}
.title{font-size:18px;font-weight:650}
.meta{font-size:12px;color:#aaa;margin-top:4px}
</style>
</head>

<body>

<div class="top">
  <a href="index.html">← Home</a>
  <b>K-Drama</b>
  <span></span>
</div>

<div class="grid" id="grid"></div>

<script src="sortdata.js"></script>
<script>
  // K-Drama list page: shows only items tagged "K-Drama"
  const grid = document.getElementById("grid");
  const shows = window.SHOWS || {};

  // Turn object -> array, filter to K-Drama, then sort by title
  const items = Object.entries(shows)
    .map(([id, s]) => ({ id, ...s }))
    .filter(s => Array.isArray(s.tags) && s.tags.includes("K-Drama"))
    .sort((a,b) => (a.title || "").localeCompare(b.title || ""));

  // Fallback poster (if you haven't added posters yet)
  const fallbackPoster = "assets/home/kdrama.jpg";

  items.forEach(s => {
    const poster = s.poster ? s.poster : fallbackPoster;

    const a = document.createElement("a");
    a.className = "card";
    a.href = `shows.html?id=${encodeURIComponent(s.id)}`;

    a.innerHTML = `
      <div class="poster" style="background-image:url('${poster.replace(/'/g, "\\'")}');"></div>
      <div class="info">
        <div class="title">${s.title || "Untitled"}</div>
        <div class="meta">${s.year || ""}${s.meta ? " · " + s.meta : ""}</div>
      </div>
    `;
    grid.appendChild(a);
  });
</script>

</body>
</html>
