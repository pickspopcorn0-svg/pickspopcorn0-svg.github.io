<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>K-Drama — Popcorn Picks</title>

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6052420824639800"
        crossorigin="anonymous"></script>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{background:#0b0b0c;color:#fff;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial}
a{text-decoration:none;color:inherit}
.top{
  position:sticky;top:0;z-index:50;
  display:flex;justify-content:space-between;align-items:center;
  padding:16px 20px;background:rgba(10,10,10,.88);
  backdrop-filter:blur(10px);border-bottom:1px solid #222;
}
.top b{font-size:16px}

.wrap{padding:16px 18px 6px}
.searchRow{display:flex;gap:10px;flex-wrap:wrap}
.searchRow input{
  flex:1;min-width:240px;
  padding:12px 14px;border-radius:12px;
  border:1px solid #222;background:#111;color:#fff;outline:none;
}
.btn{
  padding:12px 14px;border-radius:12px;
  border:1px solid #222;background:#141414;color:#fff;cursor:pointer;
}
.btn:active{transform:translateY(1px)}
.small{color:#aaa;font-size:12px;padding:10px 2px 0;line-height:1.4}

.grid{
  padding:16px 18px 26px;
  display:grid;grid-template-columns:repeat(auto-fit,minmax(230px,1fr));
  gap:18px;
}
.card{
  border-radius:18px;border:1px solid #181818;overflow:hidden;
  position:relative;background:#111;min-height:320px;
}
.poster{height:320px;background:#111;background-size:cover;background-position:center}
.info{
  position:absolute;bottom:0;left:0;right:0;
  padding:14px;background:linear-gradient(to top,rgba(0,0,0,.92),transparent);
}
.title{font-size:18px;font-weight:650;line-height:1.2}
.meta{font-size:12px;color:#aaa;margin-top:4px}
.tagline{
  font-size:12px;color:#cfcfcf;margin-top:8px;opacity:.9;
  display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;
}

.empty{padding:22px 18px 30px;color:#aaa;display:none}

/* Detail modal */
.modal{
  position:fixed;
  inset:0;
  z-index:100;
  background:rgba(0,0,0,.72);
  display:none;

  /* center the modal */
  align-items:center;
  justify-content:center;

  padding:18px;
}

.sheet{
  width:min(980px, 100%);
  max-height:88vh;
  overflow:auto;

  background:#0f0f10;
  border:1px solid #222;
  border-radius:18px;
}
.sheetInner{padding:16px 18px 22px}
.detailTop{
  display:flex;justify-content:space-between;align-items:center;
  gap:12px;padding:10px 0 14px;
}
.closeX{
  border:1px solid #222;background:#141414;color:#fff;
  border-radius:12px;padding:10px 12px;cursor:pointer;
}
.hero{
  display:grid;grid-template-columns:120px 1fr;gap:14px;
  align-items:start;
}
.heroPoster{
  width:120px;height:170px;border-radius:14px;border:1px solid #222;
  background:#111;background-size:cover;background-position:center;
}
.h1{font-size:18px;font-weight:750;line-height:1.2}
.h2{margin-top:6px;color:#aaa;font-size:12px;line-height:1.4}
.badges{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
.badge{
  font-size:12px;border:1px solid #222;background:#111;color:#ddd;
  padding:8px 10px;border-radius:999px;
}
.synopsis{margin-top:14px;color:#e7e7e7;font-size:14px;line-height:1.6}
</style>
</head>

<body>

<div class="top">
  <a href="index.html">← Home</a>
  <b>K-Drama</b>
  <span></span>
</div>

<div class="wrap">
  <div class="searchRow">
    <input id="q" type="text" placeholder="Search title, year, genre…" autocomplete="off">
    <button class="btn" id="clearBtn" type="button">Clear</button>
  </div>
  <div class="small" id="count">Loading…</div>
</div>

<div class="grid" id="grid"></div>
<div class="empty" id="empty">No matches.</div>

<!-- Detail modal -->
<div class="modal" id="modal">
  <div class="sheet">
    <div class="sheetInner">
      <div class="detailTop">
        <b>Details</b>
        <button class="closeX" id="closeBtn">Close</button>
      </div>

      <div class="hero">
        <div class="heroPoster" id="dPoster"></div>
        <div>
          <div class="h1" id="dTitle"></div>
          <div class="h2" id="dMeta"></div>
          <div class="badges" id="dBadges"></div>
        </div>
      </div>

      <div class="synopsis" id="dSynopsis"></div>
    </div>
  </div>
</div>

<script>
/*
IMPORTANT:
Your filenames MUST match exactly what’s in GitHub.
Example you confirmed works:
assets/posters/kdrama/a-piece-of-your-mind.jpg.JPG
So use the same style for every poster line below.
*/

const KDRAMA = [
  {
    id: "insider",
    title: "Insider",
    year: "2022",
    meta: "Crime • Thriller",
    poster: "assets/posters/kdrama/insider.jpg.JPG",
    synopsis: "A rookie judicial trainee gets dragged into a dangerous undercover operation and ends up trapped inside a prison run by money, power, and deals. To survive, he has to read people fast, play factions against each other, and keep his real mission hidden—one mistake and he’s finished."
  },
  {
    id: "priest",
    title: "Priest",
    year: "2018",
    meta: "Horror • Supernatural",
    poster: "assets/posters/kdrama/priest.jpg.JPG",
    synopsis: "A priest with a violent past and a doctor who trusts only medicine are forced onto the same cases—patients who don’t make sense. As exorcisms collide with hospital reality, they chase a presence that spreads through trauma, guilt, and bodies… and the cost starts to hit everyone around them."
  },
  {
    id: "flower-of-evil",
    title: "Flower of Evil",
    year: "2020",
    meta: "Thriller • Mystery",
    poster: "assets/posters/kdrama/flower-of-evil.jpg.JPG",
    synopsis: "A detective begins investigating a string of crimes that point uncomfortably close to home—her own husband. Their marriage looks perfect on the surface, but the deeper she digs, the more she realizes she may not know who she’s been living with. Love, fear, and suspicion keep tightening the rope."
  },
  {
    id: "the-veil",
    title: "The Veil",
    year: "2021",
    meta: "Spy • Action • Thriller",
    poster: "assets/posters/kdrama/the-veil.jpg.JPG",
    synopsis: "After disappearing for a year, a top NIS agent returns with missing memories and one obsession: find the traitor who destroyed his team. The search turns into a brutal, paranoid chase through internal politics, shadow networks, and betrayals that feel personal."
  },
  {
    id: "my-liberation-notes",
    title: "My Liberation Notes",
    year: "2022",
    meta: "Slice of Life • Drama",
    poster: "assets/posters/kdrama/my-liberation-notes.jpg.JPG",
    synopsis: "Three siblings grind through long commutes, quiet disappointments, and the feeling that life is passing without them. Then a mysterious outsider enters their orbit. It’s not loud or dramatic—it’s the kind of show that hits because it feels like real loneliness, real hope, and the small courage it takes to change."
  },
  {
    id: "hymn-of-death",
    title: "Hymn of Death",
    year: "2018",
    meta: "Period • Tragedy • Romance",
    poster: "assets/posters/kdrama/hymn-of-death.jpg.JPG",
    synopsis: "In 1920s Korea under Japanese rule, a pioneering soprano and a brilliant playwright fall into a love that society refuses to allow. It’s short, beautifully acted, and heavy with inevitability—art, fame, and freedom all fighting against the walls closing in."
  },
  {
    id: "undercover",
    title: "Undercover",
    year: "2021",
    meta: "Political • Thriller",
    poster: "assets/posters/kdrama/undercover.jpg.JPG",
    synopsis: "A lawyer chasing justice discovers her husband has been hiding a life he can’t talk about. As her career puts her in the national spotlight, the past catches up—agencies, secrets, and forces that don’t play fair. The tension comes from one question: how long can a family survive when the truth becomes a target?"
  },
  {
    id: "the-k2",
    title: "The K2",
    year: "2016",
    meta: "Action • Thriller",
    poster: "assets/posters/kdrama/the-k2.jpg.JPG",
    synopsis: "A fugitive ex-soldier becomes a high-level bodyguard and gets pulled into the dirty war behind political power. It’s packed with stylish fights, dangerous missions, and shifting loyalties—where protecting someone can be more lethal than attacking."
  },
  {
    id: "descendants-of-the-sun",
    title: "Descendants of the Sun",
    year: "2016",
    meta: "Romance • Action",
    poster: "assets/posters/kdrama/descendants-of-the-sun.jpg.JPG",
    synopsis: "A soldier and a doctor keep colliding in a disaster zone where every day feels like a crisis. It’s big-scale, glossy, and emotional—romance under pressure, rescues, moral choices, and the constant threat that duty will steal time from love."
  },
  {
    id: "tell-me-what-you-saw",
    title: "Tell Me What You Saw",
    year: "2020",
    meta: "Crime • Thriller",
    poster: "assets/posters/kdrama/tell-me-what-you-saw.jpg.JPG",
    synopsis: "A profiler who once lost everything teams up with a rookie detective gifted with near-photographic memory. Together they chase a serial killer case that refuses to stay buried. Dark tone, steady tension, and that feeling that the killer is always one step ahead."
  },
  {
    id: "love-affairs-in-the-afternoon",
    title: "Love Affairs in the Afternoon",
    year: "2019",
    meta: "Adult • Romance • Drama",
    poster: "assets/posters/kdrama/love-affairs-in-the-afternoon.jpg.JPG",
    synopsis: "A lonely woman in a quiet marriage meets people living double lives—love that’s messy, tempting, and morally complicated. It’s intimate and slow, more about emotional needs than shock, and it shows how quietly a life can crack before it breaks."
  },
  {
    id: "mouse",
    title: "Mouse",
    year: "2021",
    meta: "Psychological • Thriller",
    poster: "assets/posters/kdrama/mouse.jpg.JPG",
    synopsis: "A kind-hearted rookie cop gets thrown into a terrifying serial murder case—and nothing stays simple. The story keeps twisting into questions about nature vs nurture, guilt, and identity. It’s intense, dark, and built to make you doubt what you think you know."
  },
  {
    id: "song-of-the-bandits",
    title: "Song of the Bandits",
    year: "2023",
    meta: "Period • Action",
    poster: "assets/posters/kdrama/song-of-the-bandits.jpg.JPG",
    synopsis: "Set in the lawless borderlands of the 1920s, people with nothing left fight to protect their own—outlaws, soldiers, and survivors forced into violent choices. It has a rough-edged energy, big action beats, and a strong atmosphere of desperation and pride."
  },
  {
    id: "our-movie",
    title: "Our Movie",
    year: "2025",
    meta: "Drama • Romance",
    poster: "assets/posters/kdrama/our-movie.jpg.JPG",
    synopsis: "A relationship story built on timing, ambition, and the kind of feelings you can’t schedule. It leans into chemistry and quiet tension—two people pulled together while life keeps pushing them apart, forcing honest choices instead of easy ones."
  },
  {
    id: "dr-prisoner",
    title: "Doctor Prisoner",
    year: "2019",
    meta: "Revenge • Thriller",
    poster: "assets/posters/kdrama/doctor-prisoner.jpg.JPG",
    synopsis: "A brilliant doctor loses everything to a powerful hospital and the elites it protects. He resurfaces inside the prison system—where medical access becomes leverage. Smart revenge, strategy-heavy conflicts, and a satisfying sense of turning the system’s own rules into a weapon."
  },
  {
    id: "the-devil-judge",
    title: "The Devil Judge",
    year: "2021",
    meta: "Dystopian • Thriller",
    poster: "assets/posters/kdrama/the-devil-judge.jpg.JPG",
    synopsis: "In a near-future society that treats justice like a televised spectacle, a star judge becomes the face of punishment—and maybe something darker. Stylish, dramatic, and morally slippery, it keeps asking whether he’s saving the country or burning it down with a smile."
  },
  {
    id: "queen-of-tears",
    title: "Queen of Tears",
    year: "2024",
    meta: "Romance • Drama",
    poster: "assets/posters/kdrama/queen-of-tears.jpg.JPG",
    synopsis: "A married couple on the edge of collapse is forced to face what they became—and what they still feel. It’s emotional but not empty: fights that sting, vulnerability that feels earned, and warmth that arrives when you least expect it."
  },
  {
    id: "a-piece-of-your-mind",
    title: "A Piece of Your Mind",
    year: "2020",
    meta: "Healing • Romance",
    poster: "assets/posters/kdrama/a-piece-of-your-mind.jpg.JPG",
    synopsis: "A gentle, quiet romance about grief that doesn’t go away quickly. A programmer and a sound engineer drift into each other’s lives, learning how memory can trap you—and how small human connections can slowly loosen the knot."
  },
  {
    id: "dr-romantic",
    title: "Dr. Romantic",
    year: "2016",
    meta: "Medical • Drama",
    poster: "assets/posters/kdrama/dr-romantic.jpg.JPG",
    synopsis: "At a small hospital with big pressure, a legendary mentor pushes young doctors to choose ethics over ego. The cases are tense, the emotions are real, and the best part is the feeling of growth—people becoming better under fire."
  },
  {
    id: "she-would-never-know",
    title: "She Would Never Know",
    year: "2021",
    meta: "Workplace • Romance",
    poster: "assets/posters/kdrama/she-would-never-know.jpg.JPG",
    synopsis: "A grounded office romance where the tension comes from real-life mess—careers, pride, timing, and emotional honesty. It’s soft but not weak, and the chemistry works because it grows instead of exploding out of nowhere."
  },
  {
    id: "dr-john",
    title: "Doctor John",
    year: "2019",
    meta: "Medical • Drama",
    poster: "assets/posters/kdrama/dr-john.jpg.JPG",
    synopsis: "A brilliant doctor known for reading pain like a language takes on impossible cases and heavier ethical questions. It’s calm but intense—less about hospital glamour, more about responsibility, compassion, and what it means to treat suffering seriously."
  }
];

const $ = (id)=>document.getElementById(id);
const grid = $("grid");
const qEl = $("q");
const emptyEl = $("empty");
const countEl = $("count");

const modal = $("modal");
const closeBtn = $("closeBtn");
const dPoster = $("dPoster");
const dTitle = $("dTitle");
const dMeta = $("dMeta");
const dBadges = $("dBadges");
const dSynopsis = $("dSynopsis");

function normalize(s){ return String(s||"").toLowerCase().trim(); }

function openDetail(item){
  dPoster.style.backgroundImage = `url('${String(item.poster).replace(/'/g,"\\'")}')`;
  dTitle.textContent = item.title || "";
  dMeta.textContent = `${item.year || ""}${item.meta ? " • " + item.meta : ""}`;
  dBadges.innerHTML = "";
  (String(item.meta||"").split("•").map(x=>x.trim()).filter(Boolean)).forEach(t=>{
    const b = document.createElement("div");
    b.className = "badge";
    b.textContent = t;
    dBadges.appendChild(b);
  });
  dSynopsis.textContent = item.synopsis || "";
  modal.style.display = "flex";

  // update URL hash (optional)
  location.hash = item.id;
}

function closeDetail(){
  modal.style.display = "none";
  if(location.hash) history.replaceState(null, "", location.pathname);
}

closeBtn.onclick = closeDetail;
modal.addEventListener("click", (e)=>{ if(e.target === modal) closeDetail(); });

function card(item){
  const a = document.createElement("a");
  a.className = "card";
  a.href = "#"+encodeURIComponent(item.id);
  const safePoster = String(item.poster).replace(/'/g,"\\'");
  a.innerHTML = `
    <div class="poster" style="background-image:url('${safePoster}');"></div>
    <div class="info">
      <div class="title">${item.title}</div>
      <div class="meta">${item.year}${item.meta ? " • " + item.meta : ""}</div>
      <div class="tagline">${item.synopsis}</div>
    </div>
  `;
  a.onclick = (ev)=>{ ev.preventDefault(); openDetail(item); };
  return a;
}

function render(){
  const q = normalize(qEl.value);

  const filtered = KDRAMA
    .filter(x=>{
      const hay = [x.title,x.year,x.meta,x.synopsis].join(" ");
      return normalize(hay).includes(q);
    })
    .sort((a,b)=>String(a.title).localeCompare(String(b.title)));

  grid.innerHTML = "";
  filtered.forEach(x=>grid.appendChild(card(x)));

  countEl.textContent = `${filtered.length} title${filtered.length===1?"":"s"} found`;
  emptyEl.style.display = filtered.length ? "none" : "block";
}

$("clearBtn").onclick = ()=>{ qEl.value=""; render(); };
qEl.addEventListener("input", render);

// open detail if hash exists
function tryOpenFromHash(){
  const id = decodeURIComponent((location.hash || "").replace("#",""));
  if(!id) return;
  const item = KDRAMA.find(x=>x.id === id);
  if(item) openDetail(item);
}

render();
tryOpenFromHash();
window.addEventListener("hashchange", tryOpenFromHash);
</script>

</body>
</html>
